<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title> 
	<link rel="stylesheet" type="text/css" href="stylesheets/style.css">
	<link type="image/x-icon" href="favicon.ico" rel="icon">
	<script type="text/javascript" src="javascripts/jquery.js"></script>
	<script>
	window.onload = function(){

		function reminder(msg){
			$('body').append('<div class="store_suc"></div>');
			$('.store_suc').html(msg).css('display','block').stop().animate({opacity:0.5},200,function(){
				var _this = this;
				setTimeout(function(){

					$(_this).animate({opacity:0},200,function(){
						$(this).remove();
					});
				},1000);

			});
		};

		var oLogin = document.getElementById('login');
		var oRegister = document.getElementById('register');

		oLogin.onclick = function(){	
			var sName = $('#usrname').val();
			var sPassword = $('#password').val();
			 $.ajax({
	             type: "POST",
	             url: "http://localhost:3000/login",
	             data: {
	             	'name':sName,
	             	'password':sPassword
	             },
	             dataType: "json",
	             success: function(data){
                    if(data.code == 0){
	                	reminder('登陆成功!');
	                	$('.loginBox').fadeOut(500);;
	                }else{
	                	reminder(data.msg.detail);
	                };
                  }
	         });
		};

		oRegister.onclick = function(){
			var sName = $('#usrname').val();
			var sPassword = $('#password').val();

			$.ajax({
	             type: "POST",
	             url: "http://localhost:3000/register",
	             data: {
	             	'name':sName,
	             	'password':sPassword
	             },
	             dataType: "json",
	             success: function(data){
	                if(data.code == 0){
	                	reminder('注册成功，请登陆!');
	                }else{
	                	reminder(data.msg.detail);
	                };
	              }
	         });
		};
	};
	</script>
</head>
<body>	
	<header>ShoppingCar</header>
	<div id="loginBox" class="loginBox">
		<div class="loginTitle">Login</div>
		<div class="form">
			<li><span>usrname:</span><input id="usrname" type="text"></li>
			<li><span>password:</span><input id="password" type="password"></li>
			<div id="login" class="login submit">Login</div>
			<div id="register" class="register submit">Register</div>
		</div>
	</div>
</body>
</html>
